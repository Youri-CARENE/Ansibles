---
- name: Test du rôle de configuration de la base de données
  hosts: localhost
  roles:
    - database

  tasks:
    - name: Vérifier l'installation de PostgreSQL
      command: dpkg -l | grep postgresql
      register: postgresql_installed

    - name: Vérifier que PostgreSQL est démarré et activé
      systemd:
        name: postgresql
        state: started
        enabled: yes
      register: postgresql_status

    - name: Vérifier la présence du fichier de configuration PostgreSQL
      stat:
        path: /etc/postgresql/postgresql.conf
      register: postgresql_config

    - name: Afficher le résultat de l'installation de PostgreSQL
      debug:
        var: postgresql_installed

    - name: Afficher le statut de PostgreSQL
      debug:
        var: postgresql_status

    - name: Afficher le statut du fichier de configuration PostgreSQL
      debug:
        var: postgresql_config
