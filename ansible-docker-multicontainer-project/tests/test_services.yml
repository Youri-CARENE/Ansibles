---
- name: Vérification du bon fonctionnement des conteneurs
  hosts: all
  become: true
  tasks:
    - name: Vérifier que les conteneurs sont actifs
      shell: docker inspect -f '{{.State.Running}}' {{ item }}
      loop:
        - ubuntu_container
        - alpine_container
        - centos_container
        - debian_container
        - fedora_container
        - archlinux_container
        - opensuse_container
        - oraclelinux_container
        - freebsd_container
        - busybox_container
      register: container_status
      changed_when: false

    - name: Afficher l'état des conteneurs
      debug:
        msg: "{{ item.item }} status: {{ item.stdout }}"
      loop: "{{ container_status.results }}"
